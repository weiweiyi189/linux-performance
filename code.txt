from pyecharts import Bar
import psutil  # 用于获取系统信息

def visualize_system_cpu_usage():
    """
    可视化系统CPU占用
    """
    cpu_percent = psutil.cpu_percent(interval=1, percpu=True)
    bar = Bar("System CPU Usage")
    bar.add_xaxis([f"CPU {i}" for i in range(len(cpu_percent))])
    bar.add_yaxis("CPU Usage", cpu_percent)
    bar.render("system_cpu_usage.html")

def visualize_system_memory_usage():
    """
    可视化系统内存占用
    """
    mem = psutil.virtual_memory()
    total_memory = mem.total
    used_memory = mem.used
    memory_percent = mem.percent
    bar = Bar("System Memory Usage")
    bar.add_xaxis(["Total Memory", "Used Memory", "Memory Percentage"])
    bar.add_yaxis("Memory Usage", [total_memory, used_memory, memory_percent])
    bar.render("system_memory_usage.html")

def visualize_process_memory_usage():
    """
    可视化进程内存使用大小
    """
    pid = psutil.Process()  # 获取当前进程的PID
    memory_info = pid.memory_info()
    memory_usage = memory_info.rss
    bar = Bar("Process Memory Usage")
    bar.add_xaxis(["Memory Usage"])
    bar.add_yaxis("Memory Usage", [memory_usage])
    bar.render("process_memory_usage.html")

if __name__ == "__main__":
    visualize_system_cpu_usage()
    visualize_system_memory_usage()
    visualize_process_memory_usage()
